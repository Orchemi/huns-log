---
title: "[Vue] Vue3 + Vite + TS í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸°(feat. router, vuex, scss)"

categories:
  - Vue

tags:
  - [SPA, Vue]

date: 2022-07-04T02:00
last_modified_at: 2022-07-04T02:00

author_profile: true

toc: true
toc_label: "ëª©ì°¨"
toc_icon: "bars"
toc_sticky: true
published: true
---

## Vue3 + Vite + TS í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸°

- [Vite: First Vite Project](https://vitejs.dev/guide/#scaffolding-your-first-vite-project)
- vue create ëª…ë ¹ì–´ëŠ” webpack ë²ˆë“¤ëŸ¬ë¥¼ ì‚¬ìš©
- vite ë²ˆë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” vite appì„ ìƒì„±í•´ì•¼ í•¨

```bash
$ npm init vite@latest <app-name> -- --template vue-ts

$ cd <app-name>

$ npm run dev
```

<br />

## ./srcë¥¼ @ë¡œ ë“±ë¡

- ê¸°ì¡´ vue í”„ë¡œì íŠ¸ëŠ” **@** í‘œì‹œë¥¼ ìë™ìœ¼ë¡œ **src**ì˜ ì˜ë¯¸ë¡œ ì‚¬ìš©
- vite ì•±ì€ ë³„ë„ì˜ ì„¤ì •ì´ í•„ìš”
- ğŸ“ƒvite.config.ts ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •

```ts
// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    }
  }
})
```

<br />

> pathì— ì˜¤ë¥˜ê°€ ìƒê¸°ëŠ”ë°ìš”?

- **types/node**ë¥¼ ì„¤ì¹˜í•´ì£¼ë©´ ëœë‹¤.
- [npmjs-types/node](https://www.npmjs.com/package/@types/node)

```bash
$ npm install --save @types/node
```

<br />

> ë˜ ë¬´ìŠ¨ ì˜¤ë¥˜ê°€ ìƒê¸°ëŠ”ë°ìš”?

![image](https://user-images.githubusercontent.com/86189596/177049766-9c1aad73-b8d6-4e4a-9efb-e961107fdf2f.png)

<br />

- **allowSyntheticDefaultImports**ë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì²˜ë¦¬í•´ì£¼ì–´ì•¼ í•œë‹¤.

```json
// tsconfig.node.json
"compilerOptions": {
  ...
  "allowSyntheticDefaultImports": true,
},
```

- [ì°¸ê³  ë¸”ë¡œê·¸](https://pcconsoleoraksil.tistory.com/323)
- ìœ„ì˜ ë¸”ë¡œê·¸ëŠ” **tsconfig.json**ì— ì¶”ê°€í•˜ë¼ê³  í•˜ì˜€ìœ¼ë‚˜, ë‚˜ì˜ ê²½ìš° tsconfig.node.jsonì— ì¶”ê°€í•˜ë‹ˆ ì˜¤ë¥˜ê°€ í•´ê²°ë˜ì—ˆë‹¤.

<br />

## Vue router ì ìš©

- [ì°¸ê³  ë¸”ë¡œê·¸](https://velog.io/@cindy-choi/Vue3-%EC%97%90-vue-route-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0)

<br />

### vue router4 ì„¤ì¹˜

- Vue3ì—ì„œëŠ” vue-router@4(ë²„ì „ 4)ê°€ í•„ìš”

```bash
$ npm install vue-router@4
```

<br />

### router íŒŒì¼ ìƒì„±

- ğŸ“‚src ë‚´ì— ğŸ“ƒrouter.ts ìƒì„±

```ts
// router.ts
import { createRouter, createWebHistory } from 'vue-router';

const routes: any[] = []
const router = createRouter({
  history: createWebHistory(),
  routes,
})

export default router
```

<br />

### Vue ì•±ì´ routerë¥¼ ì‚¬ìš©í•˜ê²Œ í•˜ê¸°

- ğŸ“ƒmain.tsì— router ì‚¬ìš© ì½”ë“œ ì¶”ê°€

```ts
// main.ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router' ğŸ”†

createApp(App)
  .use(router) ğŸ”†
  .mount('#app')
```

<br />

### routes ì±„ìš°ê¸°

- ğŸ“‚src ë‚´ì— ğŸ“‚views ìƒì„±
- ğŸ“‚views ë‚´ì— pathì— ë”°ë¼ ì´ë™í•  view vue íŒŒì¼ ìƒì„±
- ì˜ˆì‹œë¡œëŠ” ğŸ“ƒHome.vue, ğŸ“ƒLogin.vue ìƒì„±

- ğŸ“‚src ë‚´ì— ğŸ“ƒrouter.ts ìƒì„±

```ts
import { createRouter, createWebHistory } from 'vue-router';

const routes: any[] = [
  // í™ˆ í™”ë©´
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/Home.vue'),
  },

  // ë¡œê·¸ì¸ í™”ë©´
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/Login.vue'),
  },

  ...
]

const router = createRouter({
  history: createWebHistory(),
  routes,
})

export default router
```

- router(Array) ë‚´ë¶€ì— route(Object) ì •ë³´ ì¶”ê°€
- ê° routeëŠ” path, name, componentë¡œ êµ¬ì„±
- componentëŠ” ë™ì  import

<br />

### App.vueì— router-view ì¶”ê°€

```html
<!-- App.vue -->
<script></script>

<template>
  <router-view /> ğŸ”†
</template>

<style></style>
```

- templateì— **router-view** ì¶”ê°€
- pathì— ë”°ë¼ routerì— ì§€ì •ëœ pathê°€ router-view ìœ„ì¹˜ì— component vue fileì´ ìœ„ì¹˜

<br />

## vuex ì ìš©

- [ì°¸ê³  ë¸”ë¡œê·¸](https://velog.io/@cindy-choi/Vue-Express-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0-2-Vuex-4.0-Migration)

<br />

### vuex4 ì„¤ì¹˜

```bash
$ npm install vuex@next --save
```

<br />

### storeê³¼ index.js ìƒì„±

- ğŸ“‚src ë‚´ì— ğŸ“‚store ìƒì„±
- ğŸ“‚store ë‚´ì— ğŸ“ƒindex.ts ìƒì„±

```ts
import { createStore } from 'vuex';
import reservation from './modules/reservation';

// store ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ export í•œë‹¤ëŠ” ì ì— ì£¼ì˜! 
export const store = createStore ({
  modules: { reservation },
});
```

- ëª¨ë“ˆì„ importí•´ì„œ createStoreë¡œ ìƒì„±í•œ store ë‚´ì— ì¶”ê°€
- ì´ storeë¥¼ exportí•˜ì—¬ ì‚¬ìš©

<br />

### ëª¨ë“ˆ reservation ìƒì„±

- storeì— ë„£ì„ moduleì„ ë§Œë“¤ì–´ë³´ì.

```ts
// @/store/modules/reservation/index.ts
import MUTATIONS from './mutation';

const state = {
  reservations: [],
};

const getters = {
  reservations: (_state: any) => {
    return _state.reservations;
  }
};

const actions = {
};

const mutations = {
  [MUTATIONS.SET_RESERVATIONS]: (_state:any, list:any) => {
      _state.reservations = list;
  }
};

export default {
  namespaced: true,
  state,
  getters,
  actions,
  mutations,
};
```

- ì˜¤ë¥˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ì„ì‹œë¡œ any typeì„ ì •ì˜í•´ì£¼ì—ˆë‹¤.
- MUTATIONë¥¼ importí•´ì˜¬ ğŸ“ƒmutation.tsëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br />

```ts
// @/modules/reservation/mutations.ts
const MUTATIONS = {
  SET_RESERVATIONS: 'setReservations',
};

export default MUTATIONS;
```

<br />

### main.tsì— store ì¶”ê°€

- storeë¥¼ ğŸ“ƒmain.tsì— ì¶”ê°€í•´ì•¼ ì‚¬ìš© ê°€ëŠ¥

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import { store } from './store' ğŸ”†

createApp(App)
  .use(store) ğŸ”†
  .use(router)
  .mount('#app')
```

<br />

### vue instanceì—ì„œ ì‚¬ìš©

```html
<script>
import { createNamespacedHelpers } from 'vuex';
import MUTATIONS from '@/frontend/src/store/modules/reservation/mutation';

const { mapGetters, mapMutations } = createNamespacedHelpers('reservation');

export default {
  name: 'HelloWorld',
  props: {
    msg: String,
  },
  computed: {
    ...mapGetters({
      list: 'reservations',
    }),
  },

  methods: {
    ...mapMutations({
      setList: MUTATIONS.SET_RESERVATIONS,
    }),
  },
}
</script>
```

- ìœ„ì™€ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥
- options APIë¥¼ ì‚¬ìš©í•˜ì—¬ ìš°ë¦¬ê°€ ì‚¬ìš©í•  composition APIì™€ëŠ” ë‹¤ì†Œ ìƒì´

<br />

## SCSS ì ìš©

- [Vite: CSS Pre-processors](https://vitejs.dev/guide/features.html#css-pre-processors)

```bash
$ npm add -D sass
```

- ìœ„ì˜ ëª…ë ¹ì–´ë¡œ sassë¥¼ npmì— ì¶”ê°€
- ì´í›„ vue componentì˜ style íƒœê·¸ì— ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€

```
<style lang="scss">
</style>
```

<br />

> Tip: styleì— ì ìš©í•œ ê²ƒì´ ì „ì—­ì— ì ìš©ë˜ëŠ”ë°ìš”?

style íƒœê·¸ì— **scope**ë¥¼ ì¶”ê°€í•˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë£¨íŠ¸ë¡œ í•˜ì—¬ ìŠ¤íƒ€ì¼ì´ ì ìš©