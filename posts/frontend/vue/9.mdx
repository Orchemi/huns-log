---
title: "[Vue] Vue3 + Vite + TS 프로젝트 시작하기(feat. router, vuex, scss)"

categories:
  - Vue

tags:
  - [SPA, Vue]

date: 2022-07-04T02:00
last_modified_at: 2022-07-04T02:00

author_profile: true

toc: true
toc_label: "목차"
toc_icon: "bars"
toc_sticky: true
published: true
---

## Vue3 + Vite + TS 프로젝트 시작하기

- `[Vite: First Vite Project](https://vitejs.dev/guide/#scaffolding-your-first-vite-project)`
- vue create 명령어는 webpack 번들러를 사용
- vite 번들러를 사용하기 위해서는 vite app을 생성해야 함

```bash
$ npm init vite@latest <app-name> -- --template vue-ts

$ cd <app-name>

$ npm run dev
```

<br />

## ./src를 @로 등록

- 기존 vue 프로젝트는 **@** 표시를 자동으로 **src**의 의미로 사용
- vite 앱은 별도의 설정이 필요
- 📃vite.config.ts 에서 다음과 같이 설정

```ts
// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    }
  }
})
```

<br />

> path에 오류가 생기는데요?

- **types/node**를 설치해주면 된다.
- `[npmjs-types/node](https://www.npmjs.com/package/@types/node)`

```bash
$ npm install --save @types/node
```

<br />

> 또 무슨 오류가 생기는데요?

`![image](https://user-images.githubusercontent.com/86189596/177049766-9c1aad73-b8d6-4e4a-9efb-e961107fdf2f.png)`

<br />

- **allowSyntheticDefaultImports**를 사용한다고 처리해주어야 한다.

```json
// tsconfig.node.json
"compilerOptions": {
  ...
  "allowSyntheticDefaultImports": true,
},
```

- `[참고 블로그](https://pcconsoleoraksil.tistory.com/323)`
- 위의 블로그는 **tsconfig.json**에 추가하라고 하였으나, 나의 경우 tsconfig.node.json에 추가하니 오류가 해결되었다.

<br />

## Vue router 적용

- `[참고 블로그](https://velog.io/@cindy-choi/Vue3-%EC%97%90-vue-route-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0)`

<br />

### vue router4 설치

- Vue3에서는 vue-router@4(버전 4)가 필요

```bash
$ npm install vue-router@4
```

<br />

### router 파일 생성

- 📂src 내에 📃router.ts 생성

```ts
// router.ts
import { createRouter, createWebHistory } from 'vue-router';

const routes: any[] = []
const router = createRouter({
  history: createWebHistory(),
  routes,
})

export default router
```

<br />

### Vue 앱이 router를 사용하게 하기

- 📃main.ts에 router 사용 코드 추가

```ts
// main.ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router' 🔆

createApp(App)
  .use(router) 🔆
  .mount('#app')
```

<br />

### routes 채우기

- 📂src 내에 📂views 생성
- 📂views 내에 path에 따라 이동할 view vue 파일 생성
- 예시로는 📃Home.vue, 📃Login.vue 생성

- 📂src 내에 📃router.ts 생성

```ts
import { createRouter, createWebHistory } from 'vue-router';

const routes: any[] = [
  // 홈 화면
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/Home.vue'),
  },

  // 로그인 화면
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/Login.vue'),
  },

  ...
]

const router = createRouter({
  history: createWebHistory(),
  routes,
})

export default router
```

- router(Array) 내부에 route(Object) 정보 추가
- 각 route는 path, name, component로 구성
- component는 동적 import

<br />

### App.vue에 router-view 추가

```html
<!-- App.vue -->
<script></script>

<template>
  <router-view /> 🔆
</template>

<style></style>
```

- template에 **router-view** 추가
- path에 따라 router에 지정된 path가 router-view 위치에 component vue file이 위치

<br />

## vuex 적용

- `[참고 블로그](https://velog.io/@cindy-choi/Vue-Express-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0-2-Vuex-4.0-Migration)`

<br />

### vuex4 설치

```bash
$ npm install vuex@next --save
```

<br />

### store과 index.js 생성

- 📂src 내에 📂store 생성
- 📂store 내에 📃index.ts 생성

```ts
import { createStore } from 'vuex';
import reservation from './modules/reservation';

// store 변수를 만들어서 export 한다는 점에 주의! 
export const store = createStore ({
  modules: { reservation },
});
```

- 모듈을 import해서 createStore로 생성한 store 내에 추가
- 이 store를 export하여 사용

<br />

### 모듈 reservation 생성

- store에 넣을 module을 만들어보자.

```ts
// @/store/modules/reservation/index.ts
import MUTATIONS from './mutation';

const state = {
  reservations: [],
};

const getters = {
  reservations: (_state: any) => {
    return _state.reservations;
  }
};

const actions = {
};

const mutations = {
  [MUTATIONS.SET_RESERVATIONS]: (_state:any, list:any) => {
      _state.reservations = list;
  }
};

export default {
  namespaced: true,
  state,
  getters,
  actions,
  mutations,
};
```

- 오류를 피하기 위해 임시로 any type을 정의해주었다.
- MUTATION를 import해올 📃mutation.ts는 다음과 같다.

<br />

```ts
// @/modules/reservation/mutations.ts
const MUTATIONS = {
  SET_RESERVATIONS: 'setReservations',
};

export default MUTATIONS;
```

<br />

### main.ts에 store 추가

- store를 📃main.ts에 추가해야 사용 가능

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import { store } from './store' 🔆

createApp(App)
  .use(store) 🔆
  .use(router)
  .mount('#app')
```

<br />

### vue instance에서 사용

```html
<script>
import { createNamespacedHelpers } from 'vuex';
import MUTATIONS from '@/frontend/src/store/modules/reservation/mutation';

const { mapGetters, mapMutations } = createNamespacedHelpers('reservation');

export default {
  name: 'HelloWorld',
  props: {
    msg: String,
  },
  computed: {
    ...mapGetters({
      list: 'reservations',
    }),
  },

  methods: {
    ...mapMutations({
      setList: MUTATIONS.SET_RESERVATIONS,
    }),
  },
}
</script>
```

- 위와 같이 사용 가능
- options API를 사용하여 우리가 사용할 composition API와는 다소 상이

<br />

## SCSS 적용

- `[Vite: CSS Pre-processors](https://vitejs.dev/guide/features.html#css-pre-processors)`

```bash
$ npm add -D sass
```

- 위의 명령어로 sass를 npm에 추가
- 이후 vue component의 style 태그에 다음과 같이 추가

```
<style lang="scss">
</style>
```

<br />

> Tip: style에 적용한 것이 전역에 적용되는데요?

style 태그에 **scope**를 추가하면 해당 컴포넌트를 루트로 하여 스타일이 적용