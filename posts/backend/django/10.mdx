---
title: "[Django] DB APIì™€ shell_plus"

categories:
  - Django

tags:
  - Django

date: 2022-03-08T13:30
last_modified_at: 2022-03-08T13:30
author_profile: true

toc: true
toc_label: "ëª©ì°¨"
toc_icon: "bars"
toc_sticky: true
published: true
---

## DB API

- DBë¥¼ í¸í•˜ê²Œ ì¡°ì‘í•˜ê¸° ìœ„í•œ ë„êµ¬
- djangoê°€ ê¸°ë³¸ì ìœ¼ë¡œ ORMì„ ì œê³µí•¨ì— ë”°ë¥¸ ê²ƒ
- Modelì„ ë§Œë“¤ë©´ djangoëŠ” **database-abstract API**ë¥¼ ìë™ìœ¼ë¡œ ì œì‘

<br />

### database-abstract API

- database-abstract API í˜¹ì€ database-access APIë¼ê³  í•œë‹¤.
- ê°ì²´ë¥¼ ë§Œë“¤ê³  ì½ê³  ìˆ˜ì •

<br />

### Making Queries

- ë¬¸ë²• : ClassName.Manager.QuerySetAPI
- ì˜ˆì‹œ : Article.objects.all()

<br />

> ClassName

- models.pyì—ì„œ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•œ í´ë˜ìŠ¤
- ì‰½ê²Œ ìƒê°í•˜ë©´ DB í…Œì´ë¸” ìì²´ë¼ê³  ìƒê°

<br />

> Manager

- django ëª¨ë¸ì— DB query ì‘ì—…ì´ ì œê³µë˜ëŠ” ì¸í„°í˜ì´ìŠ¤
- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  django ëª¨ë¸ í´ë˜ìŠ¤ì— **object**ë¼ëŠ” Manager ì¶”ê°€
- DB í…Œì´ë¸”ì˜ ë°ì´í„° record ê°ê°ì´ í•˜ë‚˜í•˜ë‚˜ì˜ object

<br />

> querySet API : method

- querySet : DBë¡œë¶€í„° ì „ë‹¬ë°›ì€ ê°ì²´ ëª©ë¡(ê²°ê³¼)
- queryset ì•ˆì˜ ê°ì²´ëŠ” 0ê°œ, 1ê°œ, .. í˜¹ì€ Nê°œ
- DBë¡œë¶€í„° ì¡°íšŒ, í•„í„°, ì •ë ¬ ë“± ìˆ˜í–‰

<br />

## Django shell

### 1. pip ì„¤ì¹˜

- ì¼ë°˜ Python shellì„ í†µí•´ì„œëŠ” django project í™˜ê²½ì— ì ‘ê·¼ ë¶ˆê°€ëŠ¥
- **django project ì„¤ì •ì´ loadëœ Python shellì„ í™œìš©**í•´ DB API êµ¬ë¬¸ í…ŒìŠ¤íŠ¸ ì§„í–‰

- ê¸°ë³¸ Django shellë³´ë‹¤ ë” ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” shell_plusë¥¼ ì‚¬ìš©í•´ì„œ ì§„í–‰
- shell_plusëŠ” Django-extensions ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜

```bash
$ pip install django-extensions
$ pip install ipython
```

- django-extensions : shell_plusë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ pip
- ipython : shell_plusì´ terminalì—ì„œ ë³´ì´ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ ì„¤ì¹˜

<br />

### 2. settings.py App ë“±ë¡

ì´í›„ projectì˜ settings.py íŒŒì¼ì— **django_extenstions** ì•±ìœ¼ë¡œ ë“±ë¡í•´ì¤€ë‹¤.

```python
# settings.py

INSTALLED_APPS = [
    ...,
    'django_extensions',
    ...,
]
```

<u>ì£¼ì˜ğŸ“¢</u> pip install ì‹œì—ëŠ” django-extensions(í•˜ì´í”ˆ), INSTALLED_APPSì—ëŠ” django_extensions(ì–¸ë”ë°”)ì„ì— ì£¼ì˜í•œë‹¤.
 

<br />

### 3. shell_plus ì‹¤í–‰

django_extensionsë¥¼ ì•±ìœ¼ë¡œ ë“±ë¡í•˜ë©´ shell_plusë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

```bash
$ python manage.py shell_plus
```

<br />

ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ ì¹˜ë©´ git bashê°€ shell_plusë¡œ ë°”ë€ë‹¤.

```
# Shell Plus Model Imports
from articles.models import Article
...
from django.contrib.sessions.models import Session
# Shell Plus Django Imports
from django.core.cache import cache
...
from django.db.models import Exists, OuterRef, Subquery
Python 3.10.1 (tags/v3.10.1:2cd268a, Dec  6 2021, 19:10:37) [MSC v.1929 64 bit (AMD64)]   
Type 'copyright', 'credits' or 'license' for more information
IPython 8.1.1 -- An enhanced Interactive Python. Type '?' for help.

In [1]: 
```

- shell_plusë¥¼ ì‹¤í–‰í•˜ë©´ ì´ì „ì— modelì— ì •ì˜í–ˆë˜ ê²ƒì„ ìë™ìœ¼ë¡œ import
- ì¼ì¼íˆ import í•´ì£¼ì§€ ì•Šì•„ë„ ë¼ì„œ ìœ ìš©í•˜ë‹¤.