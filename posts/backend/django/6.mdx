---
title: "[Django] URL"

categories:
  - Django

tags:
  - Django

date: 2022-03-03T15:00
last_modified_at: 2022-03-03T15:00
author_profile: true

toc: true
toc_label: "ëª©ì°¨"
toc_icon: "bars"
toc_sticky: true
published: true
---

## URL

- Dispatcher(ë°œì†¡ì, ìš´í•­ ê´€ë¦¬ì)ë¡œì„œì˜ URL
- ì›¹Appì€ **URLì„ í†µí•œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­**ìœ¼ë¡œë¶€í„° ì‹œì‘

<br />

### Variable Routing

- **URL ì£¼ì†Œ**ë¥¼ **ë³€ìˆ˜**ë¡œ ì‚¬ìš©
- URLì˜ ì¼ë¶€ë¥¼ ë³€ìˆ˜ë¡œ ì§€ì • â†’ **view í•¨ìˆ˜ì˜ ì¸ì**ë¡œ ì „ë‹¬ ê°€ëŠ¥
- ë³€ìˆ˜ ê°’ì— ë”°ë¼ í•˜ë‚˜ì˜ path()ì— ì—¬ëŸ¬ í˜ì´ì§€(ê°œë³„ í˜ì´ì§€) ì—°ê²° ê°€ëŠ¥
- ì‚¬ìš©ì/ì»¨í…ì¸ ì— ë”°ë¥¸ ê°œë³„ì ì¸ í˜ì´ì§€!! â†’ **ë™ì  ì›¹ í”„ë¡œê·¸ë˜ë°**
- **êº½ì‡ **(`<>`; angle bracket)ë¡œ í‘œì‹œ

<br />

> ì‚¬ìš© ì˜ˆì‹œ

```
path('accounts/user/`<int:user_pk>`/', ...)
```

- accounts/user/1 â†’ 1ë²ˆ ìœ ì € ê´€ë ¨ í˜ì´ì§€
- accounts/user/2 â†’ 2ë²ˆ ìœ ì € ê´€ë ¨ í˜ì´ì§€

<br />

### URL Path converters

- variable routingì„ í†µí•´ urlì— ë³€ìˆ˜ì²˜ëŸ¼ ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ í˜•ë³€í™˜
- **int:**, **str:** ë“±ì´ ìˆë‹¤.

```python
path('something/<???:name>', views.something)
```

<br />

> str

- '/'ë¥¼ ì œì™¸í•˜ê³  ë¹„ì–´ìˆì§€ ì•Šì€ ëª¨ë“  ë¬¸ìì—´ê³¼ ë§¤ì¹˜
- converter ë¶€ë¶„ì„ ëª…ì‹œí•˜ì§€ ì•Šì„ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ str

<br />

> int

- 0 ë˜ëŠ” ì–‘ì˜ ì •ìˆ˜ì™€ ë§¤ì¹˜
- ë¬¸ìì—´, ì†Œìˆ˜ì˜ ê²½ìš° ì‚¬ìš© ì‹œ ì˜¤ë¥˜

<br />

### ì‚¬ìš© ì˜ˆì‹œ

```python
# urls.py

urlpatterns = [
  ...
  path('hello/<name>/<int:nums>', views.hello)
]
```

- urls.pyì—ì„œ serverë¡œ ì „ì†¡ëœ url í™•ì¸
- í•¨ìˆ˜ì™€ ë§¤í•‘í•  url í˜•ì‹ ì§€ì •

<br />

```python
# views.py

def hello(request, name, nums):
  context = {
    'name':name,
    'nums':nums,
  }
  return render(request, 'hello.html', context)
```

- ê¸°ë³¸ url ë’¤ì˜ router variablesëŠ” í•¨ìˆ˜ì˜ parameterë¡œ ì „ë‹¬

<br />

```html
<!-- hello.html -->
{% extends 'base.html' %} {% block content %}
  <h1>HELLO {{ name }}!!</h1>
  <h2> {{ nums }}ëª… </h2>
{% endblock content %}
```

- html í…œí”Œë¦¿ì—ì„œ ë³€ìˆ˜ë¡œ ì‚¬ìš©

<br />

<u>ì£¼ì˜ğŸ“¢</u> url path converterì˜ ê²½ìš° urls.pyì—ì„œ ìˆœì„œë¥¼ ì˜ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤!
 

```python
# urls.py

urlpatterns = [
  path('<name>/', views.hello),
  path('index/', views.index),
  path('menus/', views.menus),
]
```

url path converterê°€ ë“¤ì–´ìˆëŠ” pathì˜ ìˆœì„œê°€ ìœ„ìª½ìœ¼ë¡œ ê°€ê²Œ ë˜ë©´, ì´í›„ì— ë¹„ìŠ·í•œ í˜•ì‹ì„ ê°€ì§„ raw valueë“¤ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤!

<br />

## App URL mapping

- appì˜ view í•¨ìˆ˜ê°€ ë§ì•„ì§€ë©´ì„œ ì‚¬ìš©í•˜ëŠ” path()ì´ ë§ì•„ì§„ë‹¤.
- í”„ë¡œì íŠ¸ì˜ urls.pyì—ì„œ ëª¨ë‘ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ìœ ì§€ë³´ìˆ˜ì— ì¢‹ì§€ ì•Šë‹¤.

> Sol : ê° appì˜ urls.pyì„ ë§Œë“¤ê³  í•¨ìˆ˜ê°€ ì•„ë‹Œ appì˜ ê²½ë¡œë¥¼ **include!**

<br />

- ì§€ê¸ˆê¹Œì§€ëŠ” pjtì—ì„œ pjt ë‚´ì˜ views.pyì˜ í•¨ìˆ˜ë¥¼ ë§¤í•‘

1. í”„ë¡œì íŠ¸ì˜ ê²½ë¡œë¥¼ 'pages/'ë¡œ ë“¤ì–´ì˜¤ë©´ 'pages' appìœ¼ë¡œ ì´í›„ì˜ urlì„ ì „ë‹¬
2. Appì˜ urls.pyì—ì„œ ì´í›„ì˜ urlì„ ë” ë¶„ì„í•˜ì—¬ ì²˜ë¦¬

```python
# firstpjt/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
  path('admin/', admin.site.urls),
  path('articles/', include('articles.urls')),
  path('pages/', include('pages.urls')),
]
```

<br />

### include()

- ë‹¤ë¥¸ URLconfë“¤ì„ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
- URLì˜ í•´ë‹¹ ì‹œì ê¹Œì§€ ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„ì„ ì œì™¸í•˜ê³  ë‚¨ì€ ë¬¸ìì—´ ë¶€ë¶„ì„ includeëœ URLconfë¡œ ì „ë‹¬
- djangoëŠ” **ëª…ì‹œì  ìƒëŒ€ê²½ë¡œ**(from `<module>` import `<function or variables>`)ë¥¼ ê¶Œì¥

<br />

## Naming URL patterns

- ì§€ê¸ˆê¹Œì§€ëŠ” ë§í¬ì— urlì„ ì§ì ‘ ì‘ì„±
- ì´ì œëŠ” **path() í•¨ìˆ˜ì˜ name ì¸ìë¥¼ ì •ì˜**í•´ì„œ ì‚¬ìš©

- django template tag ì¤‘ í•˜ë‚˜ì¸ **url íƒœê·¸**(`{% url 'path name' %}`)ë¥¼ ì‚¬ìš©
- path() í•¨ìˆ˜ì— ì‘ì„±í•œ name ì‚¬ìš© ê°€ëŠ¥

```python
# urls.py

urlpatterns = [
  path('index/', views.index, name='index'),
]
```

url, ë§¤í•‘ í•¨ìˆ˜, ì´í›„ì— name ì„¤ì •

<br />

```
<a href="{% url 'index' %}">ë©”ì¸ í˜ì´ì§€</a>
```

- ìì„¸í•œ íŠ¹ì§•ì€ ì•„ë˜ì— í›„ìˆ 

<br />

### url template tag

```liquid
{% url 'path name' %}
```

- ì£¼ì–´ì§„ URL íŒ¨í„´ ì´ë¦„ ë° ì„ íƒì  ë§¤ê°œ ë³€ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ” ì ˆëŒ€ ê²½ë¡œ ì£¼ì†Œ ë°˜í™˜
- í…œí”Œë¦¿ì— URLì„ í•˜ë“œ ì½”ë”©í•˜ì§€ ì•Šê³ ë„ **DRY ì›ì¹™(Don't Repeat Yourself)**ì„ ìœ„ë°˜í•˜ì§€ ì•Šìœ¼ë©´ì„œ ë§í¬ ì¶œë ¥
- url ì„¤ì •ì— **ì •ì˜ëœ íŠ¹ì •í•œ ê²½ë¡œë“¤ì˜ ì˜ì¡´ì„± ì œê±° ê°€ëŠ¥**
- DRY ì›ì¹™: Don't Repeat Yourself

<br />

## íŒŒì¼ëª… ì¤‘ë³µ ëŒ€ì‘ : Namespace

- djangoì˜ íŒŒì¼ ì¡°íšŒ ìˆœì„œ
  - [settings.py]-[TEMPLATES]-[DIRS]ì— ì§€ì •í•´ë‘” ê²½ë¡œì˜ html í…œí”Œë¦¿
  - [settings.py]-[INSTALLED_APPS]ì— ì§€ì •í•´ë‘” ê° Appë“¤ì˜ html í…œí”Œë¦¿

- djangoëŠ” **extends**ë‚˜ **file_name/** ì‚¬ìš© ì‹œ ë“±ë¡ëœ ê²½ë¡œëŠ” ì œì™¸í•˜ê³  ë°”ë¡œ ê°–ë‹¤ ë¶™ì¸ ê²ƒì„ í•œ ë²ˆì— ëª¨ì€ë‹¤.
- **íŒŒì¼ëª…ì´ ê°™ìœ¼ë©´ ì§€ì •ëœ ê²½ë¡œ ìš°ì„ ìˆœìœ„ëŒ€ë¡œ ì•ì— ê²½ë¡œê°€ ë¶™ì–´ë²„ë¦°ë‹¤.
- ë‹¤ë¥¸ appì´ì–´ë„ **ê°™ì€ íŒŒì¼ëª…ì„ ì‚¬ìš©í•œë‹¤ë©´ ë‹¤ë¥¸ íŒŒì¼ì´ ë Œë”ë§ ë  ìˆ˜ ìˆë‹¤.**

> Sol : appë“¤ë§ˆë‹¤ **templates í´ë” ë‚´ì— app ì´ë¦„ì˜ í´ë”ë¥¼ ë§Œë“¤ê³ ** ê·¸ ì•ˆì— template html íŒŒì¼ì„ ë„£ì!

- **ê²½ë¡œë¥¼ ë¬¼ë¦¬ì ìœ¼ë¡œ êµ¬ë¶„í•´ì„œ ì„¤ì •**í•´ì£¼ëŠ” ê²ƒì´ë‹¤.
- ì´ë ‡ê²Œ ë§Œë“¤ì–´ì¤€ ë¬¼ë¦¬ ê²½ë¡œê°€ **namespace**ê°€ ë˜ëŠ” ê²ƒ!

<br />

```python
# pages/views.py
from django.shortcuts import render

def index(request):
    return render(request, 'pages/index.html')
```

- ì´í›„ ê²½ë¡œë¥¼ appì´ë¦„(templates ë‚´ì˜ í´ë” ì´ë¦„)ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë˜ê² ë‹¤.
- ê°™ì€ íŒŒì¼ëª…ì´ì–´ë„ **ê²½ë¡œë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ ë‹¤ë¥¸ íŒŒì¼ì„ì„ í™•ì‹¤íˆ ëª…ì‹œ**í•˜ëŠ” ê²ƒ.


<br />

### url tagì—ì„œëŠ”?

> articles appì˜ index.htmlì—ì„œ pages appì˜ index.htmlì„ ì—°ê²°í•˜ë ¤ë©´ url tagëŠ” ì–´ë–»ê²Œ ì“°ë‚˜ìš”?

```
<!-- articles/index.html -->
{% extends 'base.html' %}

{% block content %}
  <h1>ì•ˆë…•í•˜ì„¸ìš”ã…ã…</h1>
  <a href="/articles/greeting/">greeting</a> | ğŸ”¸ url íƒœê·¸ì— ì ˆëŒ€ ê²½ë¡œë¥¼ hard codingí•œ ì˜ˆ
  <a href="{% url 'dinner' %}">dinner</a> |
  <a href="{% url 'dtl-practice' %}">dtl-practice</a> |
  <a href="{% url 'throw' %}">throw</a> |
  <a href="{% url 'index' %}">Page Index</a> â­ ëª©í‘œí•˜ëŠ” ë‹¤ë¥¸ appì˜ íŒŒì¼
{% endblock content %}
```

dinner, dtl-practice, throw ê°™ì€ ê²½ìš° articles ì•±ì˜ templates ë‚´ì˜ html íŒŒì¼ì´ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤. ê·¸ëŸ°ë° pageëŠ” ë‹¤ë¥¸ appì¸ë° **ë‹¤ë¥¸ appì˜ ê²½ë¡œë¥¼ url tagë¡œ ì–´ë–»ê²Œ ì“¸ ìˆ˜ ìˆì„ê¹Œ?**

<br />

### URL namespace

```
<!-- articles/index.html -->
{% extends 'base.html' %}

{% block content %}
  <h1>ì•ˆë…•í•˜ì„¸ìš”ã…ã…</h1>
  <a href="/articles/greeting/">greeting</a> |
  <a href="{% url 'articles:dinner' %}">dinner</a> |
  <a href="{% url 'articles:dtl-practice' %}">dtl-practice</a> |
  <a href="{% url 'articles:throw' %}">throw</a> |
  <a href="{% url 'pages:index' %}">Page Index</a> â­
{% endblock content %}
```

- 'ì–´ëŠ appì˜ path nameì´ë‹¤'ë¼ëŠ” ê²ƒì´ ëª…ì‹œë˜ë©´ ì¢‹ê² ë‹¤..!

<br />

### app_name

> urls.py íŒŒì¼ ë‚´ì—ì„œ ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ë“¯ì´ **app_name:**ì„ ì•ì— ë¶™ì—¬ **ì–´ëŠ appì˜ path nameì¸ì§€ë¥¼ ëª…ì‹œ**í•´ì¤€ë‹¤.

- ê°™ì€ ì•± ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” pathì—¬ë„ app_nameì„ ëª…ì‹œí•´ì£¼ì.

```python
# pages/urls.py

app_name = 'pages'

urlpatterns = [
    path('index/', views.index, name='index'),
]
```

app_nameì„ app ì´ë¦„ìœ¼ë¡œ ì„¤ì •í•´ì•¼ ìœ„ì™€ ê°™ì€ ì‘ì—…ì´ ê°€ëŠ¥í•˜ë‹¤.